<div class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h2>Modifier un Chantier en prospection</h2>
      <button class="close-btn" (click)="onClose()">×</button>
    </div>
    <div class="modal-body">
      <form [formGroup]="editOffreForm" (ngSubmit)="onSubmit()">
        <div class="form-grid">
          <div class="form-group">
            <label for="titre">Titre du Chantier <span class="required">*</span></label>
            <input
              class="np"
              type="text"
              id="titre"
              formControlName="titre"
              [ngClass]="{'invalid': editOffreForm.get('titre')?.invalid && editOffreForm.get('titre')?.touched}"
              (focus)="clearErrorMessage()"
            />
          </div>

          <div class="form-group">
            <label for="localisation">Localisation <span class="required">*</span></label>
            <input
              class="np"
              type="text"
              id="localisation"
              formControlName="localisation"
              [ngClass]="{'invalid': editOffreForm.get('localisation')?.invalid && editOffreForm.get('localisation')?.touched}"
              (focus)="clearErrorMessage()"
            />
          </div>

          <div class="form-group">
            <label for="statut">Statut <span class="required">*</span></label>
            <select
              class="np"
              id="statut"
              formControlName="statutOffre"
              [ngClass]="{'invalid': editOffreForm.get('statutOffre')?.invalid && editOffreForm.get('statutOffre')?.touched}"
              (focus)="clearErrorMessage()"
            >
              <option value="EN_ATTENTE_DE_DEVIS">En attente de devis</option>
              <option value="EN_COURS">En cours</option>
              <option value="REFUSEE">Refusée</option>
              <option value="ACCEPTEE">Acceptée</option>
            </select>
          </div>

          <div class="form-group">
            <label for="clientId">Client <span class="required">*</span></label>
            <select
              class="np"
              id="clientId"
              formControlName="clientId"
              [ngClass]="{'invalid': editOffreForm.get('clientId')?.invalid && editOffreForm.get('clientId')?.touched}"
              (focus)="clearErrorMessage()"
            >
              <option value="" disabled selected>Sélectionner un client</option>
              <option *ngFor="let client of clients" [value]="client.id">
                {{ client.nomSociete }} 
              </option>
            </select>
          </div>

          <!-- Ajout du champ Date de Demande -->
          <div class="form-group">
            <label for="dateDemande">Date de demande <span class="required">*</span></label>
            <input
              class="np"
              type="date"
              id="dateDemande"
              formControlName="dateDemande"
              [ngClass]="{'invalid': editOffreForm.get('dateDemande')?.invalid && editOffreForm.get('dateDemande')?.touched}"
              (focus)="clearErrorMessage()"
            />
          </div>

          <!-- Ajout du champ Type -->
          <div class="form-group">
            <label for="type">Type <span class="required">*</span></label>
            <select
              class="np"
              id="type"
              formControlName="type"
              [ngClass]="{'invalid': editOffreForm.get('type')?.invalid && editOffreForm.get('type')?.touched}"
              (focus)="clearErrorMessage()"
            >
              <option value="" disabled selected>Choisir un type</option>
              <option value="MAIN_D_OEUVRE">Main d'oeuvre</option>
              <option value="MAIN_D_OEUVRE_ET_MARCHANDISE">Main d'oeuvre & Marchandises</option>
            </select>
          </div>
        </div>

        <div class="error-message" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">
            Modifier
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
