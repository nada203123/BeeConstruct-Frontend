<div class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h2>Modifier un devis</h2>
      <button class="close-btn" (click)="closeModal()">×</button>
    </div>
    <div class="modal-body">

      <form [formGroup]="devisForm" (ngSubmit)="onSubmit()">

        <div class="form-grid">
          <div class="form-group">
            <label for="offreId">Offre <span class="required">*</span></label>
            <select
              class="np"
              id="offreId"

              formControlName="offreId"
              (change)="onOffreSelected($event)"
              (focus)="clearErrorMessage()" 
            >
              <option value="" disabled>Sélectionner une offre</option>
              <option *ngFor="let offre of offres" [value]="offre.id" [selected]="offre.id=== devis?.offerId">
                {{ offre.titre}} 
              

              </option>
            </select>
          </div>

          <div class="form-group">
            <label>Client</label>
            <input class="np" formControlName="clientId" [value]="clientName" readonly>
          </div>

          <div class="form-group">
            <label for="file">Fichier du devis <span class="required">*</span></label>

            <div class="file-info">
              <p>Fichier actuel: {{ currentFileName }}</p>
              <input
                class="np"
                type="file" 
                id="file" 
                (change)="onFileSelected($event)" 
                accept=".pdf,.doc,.docx"
              >
            </div>

          </div>
        </div>

        <div class="error-message" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">
            Modifier
          </button>
        </div>
      </form>
    </div>
  </div>
</div>